<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="estilos.css" />
    <title>Lista de Compras</title>
</head>

<body>
    <h1>Lista de Compras</h1>
<div class="div2">
    <form name="listaCompra" method="POST">
        <label for="quantidade"> Quantidade</label> <br>
        <input type="number" name="quantidade" /><br><br>
        <label for="item"> Item</label> <br>
        <input type="text" name="item"><br><br>
        <input type="submit" />
        
        <hi>Itens: <span id="total"></span></hi>

    </form>
    <button id=Btnlimpar>Limpa a lista</button>
   
   
    
</div>
    <ul>

    </ul>

    <script>

        var listaCompras = [];
        var lista = document.getElementsByTagName("ul")[0];
        var botaoLimpar = document.querySelector("#limpa");
        var liTotal = document.getElementById("total");
        liTotal.textContent = lista.children.length;
        var itens = lista.getElementsByTagName('li');
        var i = Number(lista.childElementCount);
        total.textContent = i;

        document.forms.listaCompra.addEventListener("submit", processaEnvio);
        Btnlimpar.addEventListener("click", limpaLista);


        function processaEnvio(e) {
            e.preventDefault();
            console.log("FormulÃ¡rio enviado!");

            var quantidade = Number(document.forms.listaCompra.quantidade.value);
            var item = document.forms.listaCompra.item.value;
            console.log(quantidade, item);

            var novaCompra = { "quantidade": quantidade, "item": item };
            listaCompras.push(novaCompra);

            var novoLi = document.createElement("li");
            novoLi.textContent = novaCompra.quantidade + " - " + novaCompra.item;
            lista.appendChild(novoLi);
            liTotal.textContent = lista.children.length;
            document.forms.listaCompra.reset();
            document.forms.listaCompra.quantidade.focus();
            console.log(lista.childElementCount);

        }

        function limpaLista() {

            i = Number(lista.childElementCount);
            
            while (i > 0) {
                lista.removeChild(itens[0]);
                i--;
                total.textContent = i;
            }

        }

    </script>

</body>

</html>